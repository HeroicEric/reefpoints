<!DOCTYPE html><html><head><title>Using Backbone Views With Rails jQuery-ujs</title><link href="/stylesheets/all-9628918b.css" media="screen" rel="stylesheet" type="text/css" /><script src="/javascripts/all-c96a81f7.js" type="text/javascript"></script><meta content='NO-CACHE' http-equiv='CACHE-CONTROL'><meta content='DockYard is a Ruby on Rails, PostgreSQL, and, Ember.js, web / mobile application development software consultancy based in Boston, MA.' namer='description'><meta content='ruby on rails, rails, ruby, ruby on rails training, ruby application development, ruby on rails application development, ember application development, ember.js application development, software application development, web, web application development, mobile, mobile application development, ios, ios application development, iphone, iphone application development, android, android application development, postgres, startups, enterprise, Boston, MA, Massachusetts, for hire' name='keywords'><meta content='web development, mobile development, startups, enterprise, ruby on rails, rails, ruby, ruby on rails training, Boston, for hire' name='keywords'><meta content='width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0' name='viewport'><meta content='DockYard.com - Throwing them together in a way that makes sense.' name='description'><meta content='codeofficer' name='twitter:creator'><meta content='summary' name='twitter:card'><meta content='@DockYard' name='twitter:site'><meta content='http://reefpoints.dockyard.com/javascript/2012/04/16/using-backbone-views-with-rails-jquery-ujs.html' name='twitter:url'><meta content='Using Backbone Views With Rails jQuery-ujs' name='twitter:title'><meta content='Throwing them together in a way that makes sense.' name='twitter:description'><link href='//cloud.typography.com/6496052/702882/css/fonts.css' rel='stylesheet' type='text/css'><link href='http://dockyard.com/humans.txt' rel='author'><link href='/favicon-573a5e34.png' rel='shortcut icon' type='image/x-icon'><link href='/favicon-573a5e34.png' rel='icon' type='image/x-icon'><link href='/apple-touch-icon.png' rel='apple-touch-icon'><link href='/apple-touch-icon-precomposed.png' rel='apple-touch-icon-precomposed'><script>
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-24185112-2']);
    _gaq.push(['_trackPageview']);
  
    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
</script>
<!--
                                             ..
                                           .O.
                                       .:OO.
                                      :OOO.
                                    :OOO:.
                         ...      :OOOO:
                   ..ZOOOOOOOOO..OZ.O.
                   OOOOOOOOOOOOOOOOI
                  OOOOOOOOOOOOOOOOI,
                 OOOOOOOO. .OOOOOOOO:
                 OOOOOOOO   OOOOOOOOO:
                OOOOOOOOOOOOOOOOOOOOO.
                OOOOOOOOOOOOOOOOOOOOO:
               .OOOOOOOOOOOOOOOOOOOOO:
               .OOOOOOOOOOOOOOOOOOOOO.
                OOOOOOOOOOOOOOOOOOOOO
                OOOOOO?:   .OOOOOOOOO
               .OOOOO      OOOOOOOOOO
,OO ZO~        OOOOO,     OOOOOOOOOO+
 OOOOO.        OOOOO     OOOOOOOOOOO+
  OOO?        OOOOO     .OOOOOOOOOOO:
   OOO,      OOOOO.    .OOOOOOOOOOOO
    OOOOOOOOOOOOO.    .OOOOOOOOOOOO.
     OOOOOOOOOOOO.  .OOOOOOOOOOOOO.
      8OOOOOOOOOOOOOOOOOOOOOOOODO:
         :OOOOOOOOOOOOOOOOOOOO::

--></head><body class='javascript javascript_2012 javascript_2012_04 javascript_2012_04_16 javascript_2012_04_16_using-backbone-views-with-rails-jquery-ujs'><header><div class='extended-header-wrap has-border--bottom'><div class='l-wrap--wide'><nav class='extended-nav has-border--bottom'><a class='extended-nav--logo' data-icon='⌂' href='http://www.dockyard.com/'><span class='is-hidden'>Home</span></a><a class='extended-nav--close' data-icon='X'><span class='is-hidden'>Close</span></a><div class='extended-nav__items-wrap'><div class='extended-nav__items'><a class='extended-nav__item' href='http://www.dockyard.com/team'>Our Team</a><a class='extended-nav__item' href='http://www.dockyard.com/community'>Community</a><a class='extended-nav__item' href='/'>Blog</a><a class='extended-nav__item' href='http://www.dockyard.com/hire-us'>Hire Us</a></div></div></nav><nav class='work-nav'><p>Selected Work</p><a class='work-nav-item' href='http://www.dockyard.com/work/credit-card-reviews'><h4 class='work-nav-item__title' data-icon='✔'>Credit Card Reviews</h4><p class='work-nav-item__desc'>Credit card advice from real people.</p></a><a class='work-nav-item' href='http://www.dockyard.com/work/coachup'><h4 class='work-nav-item__title' data-icon='✔'>CoachUp</h4><p class='work-nav-item__desc'>You should be training. Right now.</p></a><a class='work-nav-item' href='http://www.dockyard.com/work/askthem'><h4 class='work-nav-item__title' data-icon='✔'>AskThem</h4><p class='work-nav-item__desc'>Ask officials questions on city, state, and federal levels.</p></a><a class='work-nav-item' href='http://www.dockyard.com/work/beacon-hill-blitz'><h4 class='work-nav-item__title' data-icon='✔'>Beacon Hill Blitz</h4><p class='work-nav-item__desc'>How technology helped repeal the #TechTax.</p></a></nav></div></div><nav class='main-nav-wrap has-border--bottom'><div class='main-nav l-wrap--wide'><a class='logo' href='http://www.dockyard.com/'>DockYard</a><a class='club-sandwich' data-icon='☰'><span class='is-hidden'>Navigation</span></a></div></nav></header><div class='push--header'></div><div class='l-wrap'><a class='logo--reefpoints' href='/'>ReefPoints</a><div class='search-wrap'><form class='search' data-url='/'><input class='search__input' id='search' name='search' placeholder='Search all posts' type='text' value=''><button class='search__submit' href='/'></button></form></div><nav class='blog-topnav'><a class="blog-topnav__item " href="/">Posts</a><a class="blog-topnav__item " href="/tags.html">Tags</a><a class="blog-topnav__item " href="/authors.html">Authors</a></nav><div class='post-wrap--no-comments'><aside class='post__metas--post l-post__metas'><a class='icon' data-icon='#' href='http://twitter.com/codeofficer' target='_blank'><span class='is-hidden'>Twitter</span></a><a class='icon' data-icon='★' href='https://github.com/codeofficer' target='_blank'><span class='is-hidden'>GitHub</span></a><a class="post__meta--author" href="/authors/russ-jones.html">Russ Jones</a><p class='post__meta--date'>16 Apr 2012</p><p class='post__meta--tags'><a class="post__meta--tag" href="/tags/javascript.html">JavaScript (8)</a> <a class="post__meta--tag" href="/tags/backbone.html">Backbone.js (1)</a> <a class="post__meta--tag" href="/tags/ruby-on-rails.html">Ruby on Rails (25)</a> <a class="post__meta--tag" href="/tags/jquery.html">jQuery (1)</a></p></aside><div class='post l-post'><h1 class='post__title'>Using Backbone Views With Rails jQuery-ujs</h1><current_page class='post__content'><p>I often meet Rails developers that have unwittingly jumped on the unobtrusive javascript bandwagon. 
They throw &#39;:remote =&gt; true&#39; on a form and benefit from its conventions, but don&#39;t know how to make it really work for them. 
They&#39;re probably still inclined to write out procedural jQuery code the same way they were doing it before <a href="https://github.com/rails/jquery-ujs">jquery-ujs</a> became popular. 
There&#39;s a helpful <a href="https://github.com/rails/jquery-ujs/wiki/ajax">wiki page</a> that describes its custom events and how to use them, but they probably don&#39;t know about it.</p>

<p>Maybe they&#39;ve worked on improving some client side code with Backbone recently, and maybe they&#39;re trying to do things the Backbone way but don&#39;t know how to tie that together with existing Rails views. 
Here&#39;s a quick example of how Backbone views can listen for jquery-ujs custom events. You can view a working fiddle <a href="http://jsfiddle.net/codeofficer/mpyXT/">here</a>.</p>
<div class="highlight javascript "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
19
<strong>20</strong>
21
22
23
24
25
26
27
28
29
<strong>30</strong>
31
32
33
34
35
36
37
38
39
<strong>40</strong>
41
42
43
44
45
46
47
48
49
<strong>50</strong>
51
52
53
54
55
56
57
58
59
</pre></td>
  <td class="code"><pre><span class="keyword">var</span> FormView = Backbone.View.extend({
  <span class="key">el</span>: <span class="string"><span class="delimiter">'</span><span class="content">#form</span><span class="delimiter">'</span></span>,

  <span class="key">events</span>: {
    <span class="comment">// Fired automatically when a file-type input is detected with a</span>
    <span class="comment">// non-blank value. You can use this hook to implement a handler that</span>
    <span class="comment">// will deal with those non-blank file inputs. Returning false will</span>
    <span class="comment">// disallow standard form submission.</span>
    <span class="key"><span class="delimiter">'</span><span class="content">ajax:aborted:file</span><span class="delimiter">'</span></span>     : <span class="string"><span class="delimiter">'</span><span class="content">ajaxAbortedFile</span><span class="delimiter">'</span></span>,

    <span class="comment">// Fired when there are required inputs which have been left blank.</span>
    <span class="comment">// You can use this handler to deal with those blank required inputs.</span>
    <span class="comment">// Returning false will submit the form anyway.</span>
    <span class="key"><span class="delimiter">'</span><span class="content">ajax:aborted:required</span><span class="delimiter">'</span></span> : <span class="string"><span class="delimiter">'</span><span class="content">ajaxAbortedRequired</span><span class="delimiter">'</span></span>,

    <span class="comment">// First event fired for any remote enabled form. Stopping this event</span>
    <span class="comment">// will cancel the ajax request</span>
    <span class="key"><span class="delimiter">'</span><span class="content">ajax:before</span><span class="delimiter">'</span></span>           : <span class="string"><span class="delimiter">'</span><span class="content">ajaxBefore</span><span class="delimiter">'</span></span>,

    <span class="comment">// Fired before the ajax request is sent. Stopping this event will</span>
    <span class="comment">// cancel the ajax request. Commonly used to customize certain request</span>
    <span class="comment">// headers</span>
    <span class="key"><span class="delimiter">'</span><span class="content">ajax:beforeSend</span><span class="delimiter">'</span></span>       : <span class="string"><span class="delimiter">'</span><span class="content">ajaxBeforeSend</span><span class="delimiter">'</span></span>,

    <span class="comment">// Fired after completion, if the HTTP response was a success</span>
    <span class="key"><span class="delimiter">'</span><span class="content">ajax:success</span><span class="delimiter">'</span></span>          : <span class="string"><span class="delimiter">'</span><span class="content">ajaxSuccess</span><span class="delimiter">'</span></span>,

    <span class="comment">// Fired after completion, if the server returned an error</span>
    <span class="key"><span class="delimiter">'</span><span class="content">ajax:error</span><span class="delimiter">'</span></span>            : <span class="string"><span class="delimiter">'</span><span class="content">ajaxError</span><span class="delimiter">'</span></span>,

    <span class="comment">// Fired after the request has been completed, no matter what outcome</span>
    <span class="key"><span class="delimiter">'</span><span class="content">ajax:complete</span><span class="delimiter">'</span></span>         : <span class="string"><span class="delimiter">'</span><span class="content">ajaxComplete</span><span class="delimiter">'</span></span>
  },

  <span class="function">ajaxAbortedFile</span>: <span class="keyword">function</span>(e, elements){
  },

  <span class="function">ajaxAbortedRequired</span>: <span class="keyword">function</span>(e, elements){
  },

  <span class="function">ajaxBefore</span>: <span class="keyword">function</span>(e){
  },

  <span class="function">ajaxBeforeSend</span>: <span class="keyword">function</span>(e, xhr, settings){
  },

  <span class="function">ajaxSuccess</span>: <span class="keyword">function</span>(e, data, status, xhr){
  },

  <span class="function">ajaxError</span>: <span class="keyword">function</span>(e, xhr, status, error){
  },

  <span class="function">ajaxComplete</span>: <span class="keyword">function</span>(e, xhr, status){
  }
});

<span class="predefined">$</span>(<span class="keyword">function</span>(){
    window.view = <span class="keyword">new</span> FormView();
});
</pre></td>
</tr></table>
</div></div><div class="highlight text "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
</pre></td>
  <td class="code"><pre>&lt;form id=&quot;form&quot; action=&quot;#&quot; method=&quot;POST&quot; data-remote=&quot;true&quot;&gt;
  &lt;p&gt;&lt;input type=&quot;text&quot; value=&quot;...&quot;&gt;&lt;/p&gt;
  &lt;p&gt;&lt;input type=&quot;submit&quot; value=&quot;Continue &amp;rarr;&quot;&gt;&lt;/p&gt;
&lt;/form&gt;
</pre></td>
</tr></table>
</div></div><div class='post__share'><div class='post__share__links'><a class='twitter-share-button' data-url='http://reefpoints.dockyard.com/javascript/2012/04/16/using-backbone-views-with-rails-jquery-ujs.html' data-via='DockYard' href='https://twitter.com/share'>Tweet</a><script>
  !function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src='//platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document,'script','twitter-wjs');
</script><div class='g-plusone' data-href='#' data-size='medium' data-width='100'></div><script>
  (function() {var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;po.src = 'https://apis.google.com/js/plusone.js';var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);})();
</script></div><p>This article is brought to you by <a class='text-link' href='http://www.dockyard.com/'>DockYard</a>. If you see an issue, please send a <a href='https://github.com/dockyard/reefpoints/blob/master/source/posts/', class='text-link post__issue', target: '_blank'>pull request</a> to contribute.</p><a class='button--post' href='http://www.dockyard.com/hire-us'>Hire Us</a></div></current_page></div></div><div class='post__comments'><div id='disqus_thread'></div><script>
  var disqus_shortname = 'reefpoints';
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script><noscript>Please enable JavaScript to view the <a href='http://disqus.com/?ref_noscript'>comments powered by Disqus</a>.</noscript></noscript></div><script>
  var path = window.location.pathname.split('/').reverse();
  var postname = path[0].split('.');
  var change = postname[0] + '.md';
  var newpath = 'https://github.com/dockyard/reefpoints/blob/master/source/posts/' + path[3] + '-' + path[2] + '-' + path[1] + '-' + change
  $('.post__issue').attr('href', newpath);
  
  $('.search').submit(function(event) {
    event.preventDefault();
    window.location = $(this).data('url') + '#q=' + $('.search__input').val();
  });
</script>
<h2 class='nothin'>Your search returned no results. Perhaps you should try again.</h2></div><div class='push--big'></div><footer><div class='l-wrap'><div class='footer-group'><h3 class='footer-group__title'>EVENTS</h3><nav><a class='footer__event' href='http://wickedgoodruby.com/' target='_blank'><div class='footer__event--wgr'></div><h4 class='footer-title'>Wicked Good Ruby Conf</h4></a><a class='footer__event' href='http://www.meetup.com/Boston-Ember-js/' target='_blank'><div class='footer__event--ember'></div><h4 class='footer-title'>Boston Ember.js Meetup</h4></a><a class='footer__event' href='http://www.meetup.com/uxboston/' target='_blank'><div class='footer__event--ux'></div><h4 class='footer-title'>UX Boston Meetup</h4></a><a class='footer__event' href='http://openhack.github.io/boston/' target='_blank'><div class='footer__event--openhack'></div><h4 class='footer-title'>OpenHack Boston</h4></a></nav></div><div class='footer-group'><a href='/'><h3 class='footer-group__title'>BLOG</h3></a><nav class='blog-nav--footer'><a class='blog-nav-item--footer' href='/2013/11/15/think.html'><h4 class='footer-title'>Think</h4><p class='footer-desc'>Don't do what others tell you to do without thinking about it</p></a><a class='blog-nav-item--footer' href='/2013/11/11/capybara-extensions.html'><h4 class='footer-title'>Introducing Capybara-Extensions</h4><p class='footer-desc'>Write more descriptive tests with additional finders and matchers for Capybara.</p></a><a class='blog-nav-item--footer' href='/2013/11/05/design-patterns-command-pattern.html'><h4 class='footer-title'>Design Patterns: The Command Pattern</h4><p class='footer-desc'>Exploring design patterns and their use cases</p></a></nav></div><div class='footer-group'><a href='/hire-us'><h3 class='footer-group__title'>CONTACT</h3></a><p class='footer-desc'>DockYard HQ is located in Boston. Stop in sometime and meet our team!</p><a class='footer-address has-border--top' href='https://www.google.com/maps/preview#!q=DockYard%2C+Tremont+Street+%23200%2C+Boston%2C+MA&amp;data=!4m15!2m14!1m13!1s0x89e37083512ceab3%3A0x1e657c639844318d!3m8!1m3!1d197180!2d-70.970284!3d42.31435!3m2!1i400!2i802!4f13.1!4m2!3d42.357236!4d-71.061077' target='_blank'><p class='footer-desc'>DockYard Inc.</p><p class='footer-desc'>101 Tremont Street</p><p class='footer-desc'>Suite 200</p><p class='footer-desc'>Boston, MA 02108</p></a><a class="text-link" href="http://www.dockyard.com/hire-us">Get in touch.</a><div class='footer-social has-border--top'><a class='social-nav-item' data-icon='#' href='https://twitter.com/dockyard' target='_blank'><span class='is-hidden'>Twitter</span></a><a class='social-nav-item' data-icon='★' href='https://github.com/dockyard' target='_blank'><span class='is-hidden'>GitHub</span></a><a class='social-nav-item' data-icon='✒' href='http://reefpoints.dockyard.com/atom.xml' target='_blank'><span class='is-hidden'>RSS</span></a></div></div></div></footer><audio class='foghorn' preload='auto' src='/sound/foghorn.mp3'></audio><script>
  /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  var disqus_shortname = 'reefpoints'; // required: replace example with your forum shortname
  
  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function () {
      var s = document.createElement('script'); s.async = true;
      s.type = 'text/javascript';
      s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
      (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
  }());
</script></body></html>
