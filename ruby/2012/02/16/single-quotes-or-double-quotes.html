<!DOCTYPE html><html><head><title>Single quotes or double quotes?</title><link href="/stylesheets/all-9628918b.css" media="screen" rel="stylesheet" type="text/css" /><script src="/javascripts/all-c96a81f7.js" type="text/javascript"></script><meta content='NO-CACHE' http-equiv='CACHE-CONTROL'><meta content='DockYard is a Ruby on Rails, PostgreSQL, and, Ember.js, web / mobile application development software consultancy based in Boston, MA.' namer='description'><meta content='ruby on rails, rails, ruby, ruby on rails training, ruby application development, ruby on rails application development, ember application development, ember.js application development, software application development, web, web application development, mobile, mobile application development, ios, ios application development, iphone, iphone application development, android, android application development, postgres, startups, enterprise, Boston, MA, Massachusetts, for hire' name='keywords'><meta content='web development, mobile development, startups, enterprise, ruby on rails, rails, ruby, ruby on rails training, Boston, for hire' name='keywords'><meta content='width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0' name='viewport'><meta content='DockYard.com - An opinion on when to use the different quoting styles with some performance notes' name='description'><meta content='bcardarella' name='twitter:creator'><meta content='summary' name='twitter:card'><meta content='@DockYard' name='twitter:site'><meta content='http://reefpoints.dockyard.com/ruby/2012/02/16/single-quotes-or-double-quotes.html' name='twitter:url'><meta content='Single quotes or double quotes?' name='twitter:title'><meta content='An opinion on when to use the different quoting styles with some performance notes' name='twitter:description'><link href='//cloud.typography.com/6496052/702882/css/fonts.css' rel='stylesheet' type='text/css'><link href='http://dockyard.com/humans.txt' rel='author'><link href='/favicon-573a5e34.png' rel='shortcut icon' type='image/x-icon'><link href='/favicon-573a5e34.png' rel='icon' type='image/x-icon'><link href='/apple-touch-icon.png' rel='apple-touch-icon'><link href='/apple-touch-icon-precomposed.png' rel='apple-touch-icon-precomposed'><script>
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-24185112-2']);
    _gaq.push(['_trackPageview']);
  
    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
</script>
<!--
                                             ..
                                           .O.
                                       .:OO.
                                      :OOO.
                                    :OOO:.
                         ...      :OOOO:
                   ..ZOOOOOOOOO..OZ.O.
                   OOOOOOOOOOOOOOOOI
                  OOOOOOOOOOOOOOOOI,
                 OOOOOOOO. .OOOOOOOO:
                 OOOOOOOO   OOOOOOOOO:
                OOOOOOOOOOOOOOOOOOOOO.
                OOOOOOOOOOOOOOOOOOOOO:
               .OOOOOOOOOOOOOOOOOOOOO:
               .OOOOOOOOOOOOOOOOOOOOO.
                OOOOOOOOOOOOOOOOOOOOO
                OOOOOO?:   .OOOOOOOOO
               .OOOOO      OOOOOOOOOO
,OO ZO~        OOOOO,     OOOOOOOOOO+
 OOOOO.        OOOOO     OOOOOOOOOOO+
  OOO?        OOOOO     .OOOOOOOOOOO:
   OOO,      OOOOO.    .OOOOOOOOOOOO
    OOOOOOOOOOOOO.    .OOOOOOOOOOOO.
     OOOOOOOOOOOO.  .OOOOOOOOOOOOO.
      8OOOOOOOOOOOOOOOOOOOOOOOODO:
         :OOOOOOOOOOOOOOOOOOOO::

--></head><body class='ruby ruby_2012 ruby_2012_02 ruby_2012_02_16 ruby_2012_02_16_single-quotes-or-double-quotes'><header><div class='extended-header-wrap has-border--bottom'><div class='l-wrap--wide'><nav class='extended-nav has-border--bottom'><a class='extended-nav--logo' data-icon='⌂' href='http://www.dockyard.com/'><span class='is-hidden'>Home</span></a><a class='extended-nav--close' data-icon='X'><span class='is-hidden'>Close</span></a><div class='extended-nav__items-wrap'><div class='extended-nav__items'><a class='extended-nav__item' href='http://www.dockyard.com/team'>Our Team</a><a class='extended-nav__item' href='http://www.dockyard.com/community'>Community</a><a class='extended-nav__item' href='/'>Blog</a><a class='extended-nav__item' href='http://www.dockyard.com/hire-us'>Hire Us</a></div></div></nav><nav class='work-nav'><p>Selected Work</p><a class='work-nav-item' href='http://www.dockyard.com/work/credit-card-reviews'><h4 class='work-nav-item__title' data-icon='✔'>Credit Card Reviews</h4><p class='work-nav-item__desc'>Credit card advice from real people.</p></a><a class='work-nav-item' href='http://www.dockyard.com/work/coachup'><h4 class='work-nav-item__title' data-icon='✔'>CoachUp</h4><p class='work-nav-item__desc'>You should be training. Right now.</p></a><a class='work-nav-item' href='http://www.dockyard.com/work/askthem'><h4 class='work-nav-item__title' data-icon='✔'>AskThem</h4><p class='work-nav-item__desc'>Ask officials questions on city, state, and federal levels.</p></a><a class='work-nav-item' href='http://www.dockyard.com/work/beacon-hill-blitz'><h4 class='work-nav-item__title' data-icon='✔'>Beacon Hill Blitz</h4><p class='work-nav-item__desc'>How technology helped repeal the #TechTax.</p></a></nav></div></div><nav class='main-nav-wrap has-border--bottom'><div class='main-nav l-wrap--wide'><a class='logo' href='http://www.dockyard.com/'>DockYard</a><a class='club-sandwich' data-icon='☰'><span class='is-hidden'>Navigation</span></a></div></nav></header><div class='push--header'></div><div class='l-wrap'><a class='logo--reefpoints' href='/'>ReefPoints</a><div class='search-wrap'><form class='search' data-url='/'><input class='search__input' id='search' name='search' placeholder='Search all posts' type='text' value=''><button class='search__submit' href='/'></button></form></div><nav class='blog-topnav'><a class="blog-topnav__item " href="/">Posts</a><a class="blog-topnav__item " href="/tags.html">Tags</a><a class="blog-topnav__item " href="/authors.html">Authors</a></nav><div class='post-wrap--no-comments'><aside class='post__metas--post l-post__metas'><a class='icon' data-icon='#' href='http://twitter.com/bcardarella' target='_blank'><span class='is-hidden'>Twitter</span></a><a class='icon' data-icon='★' href='https://github.com/bcardarella' target='_blank'><span class='is-hidden'>GitHub</span></a><a class="post__meta--author" href="/authors/brian-cardarella.html">Brian Cardarella</a><p class='post__meta--date'>16 Feb 2012</p><p class='post__meta--tags'><a class="post__meta--tag" href="/tags/ruby.html">Ruby (35)</a> <a class="post__meta--tag" href="/tags/code-guidelines.html">Code Guidelines (1)</a></p></aside><div class='post l-post'><h1 class='post__title'>Single quotes or double quotes?</h1><current_page class='post__content'><p>I have a simple rule when it comes to strings: I always start out with
single quotes</p>
<div class="highlight ruby "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre><span class="string"><span class="delimiter">'</span><span class="content">Hello world!</span><span class="delimiter">'</span></span>
</pre></td>
</tr></table>
</div></div>
<p>When I need to interpolate in the string or add an escaped character it
is time to upgrade to double quotes</p>
<div class="highlight ruby "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
</pre></td>
  <td class="code"><pre><span class="string"><span class="delimiter">&quot;</span><span class="content">Hello </span><span class="inline"><span class="inline-delimiter">#{</span>planet<span class="inline-delimiter">}</span></span><span class="content">!</span><span class="delimiter">&quot;</span></span>

<span class="string"><span class="delimiter">&quot;</span><span class="content">To: John Adamsn</span><span class="char">\n</span><span class="content">From: Thomas Jefferson</span><span class="delimiter">&quot;</span></span>
</pre></td>
</tr></table>
</div></div>
<p>Now what happens when the string style is part of that string itself?
For example, I don&#39;t need to interpolate and the only escaped character
needed is a single quote. This is when I&#39;ve been using <a href="http://web.njit.edu/all_topics/Prog_Lang_Docs/html/ruby/syntax.html#string">string
expressions</a>.
A string literal of <code>%q</code> is the equivalent of a single quote string and
a <code>%Q</code> is the equivalent of a double quote string. The string literals
are contained withing a non-alphanumeric delimiter.</p>
<div class="highlight ruby "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
</pre></td>
  <td class="code"><pre><span class="comment"># single quote</span>
<span class="string"><span class="delimiter">%q{</span><span class="content">Wayne's world!</span><span class="delimiter">}</span></span>

<span class="comment"># double quote</span>
<span class="string"><span class="delimiter">%Q{</span><span class="inline"><span class="inline-delimiter">#{</span>name<span class="inline-delimiter">}</span></span><span class="content">'s world!</span><span class="delimiter">}</span></span>

<span class="comment"># ZOMG also a double quote!</span>
<span class="string"><span class="delimiter">%{</span><span class="inline"><span class="inline-delimiter">#{</span>name<span class="inline-delimiter">}</span></span><span class="content">'s world!</span><span class="delimiter">}</span></span>
</pre></td>
</tr></table>
</div></div>
<p>I try to follow this rule. I don&#39;t think it saves anything other than it
just looks nicer to me. A very simple (and completely unscientific)
benchmark shows that the difference between the two is a wash</p>

<p>** Update: These benchmarks may be wrong, please see the comments for more information **</p>
<div class="highlight ruby "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
</pre></td>
  <td class="code"><pre>require <span class="string"><span class="delimiter">'</span><span class="content">benchmark</span><span class="delimiter">'</span></span>

<span class="constant">Benchmark</span>.measure { <span class="integer">1</span>..<span class="integer">10_000_000</span>.times { a = <span class="string"><span class="delimiter">'</span><span class="content">hey now</span><span class="delimiter">'</span></span> } }
<span class="comment"># =&gt;   1.960000   0.000000   1.970000 (  1.958126)</span>

<span class="constant">Benchmark</span>.measure { <span class="integer">1</span>..<span class="integer">10_000_000</span>.times { a = <span class="string"><span class="delimiter">&quot;</span><span class="content">hey now</span><span class="delimiter">&quot;</span></span> } }
<span class="comment"># =&gt;   1.980000   0.010000   1.980000 (  1.988363)</span>
</pre></td>
</tr></table>
</div></div>
<p>Any given run of this and the times would flip. The string is probably
just being optimized somewhere so this benchmark is not very good. At the 
very least it shows that execution time is similar. Let&#39;s see what happens 
when interpolating:</p>
<div class="highlight ruby "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
</pre></td>
  <td class="code"><pre><span class="constant">Benchmark</span>.measure { <span class="integer">1</span>..<span class="integer">10_000_000</span>.times { |i| a = <span class="string"><span class="delimiter">&quot;</span><span class="content">hey now </span><span class="inline"><span class="inline-delimiter">#{</span>i<span class="inline-delimiter">}</span></span><span class="delimiter">&quot;</span></span> } }
<span class="comment"># =&gt;   6.110000   0.010000   6.120000 (  6.111669)</span>
</pre></td>
</tr></table>
</div></div>
<p>Now we can see a significant jump in time. (over 3 times longer) Why does this take so much longer?
A clue as to what is happening can be seen when we compare this benchmark to string concatenation using single quotes</p>
<div class="highlight ruby "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
</pre></td>
  <td class="code"><pre><span class="constant">Benchmark</span>.measure { <span class="integer">1</span>..<span class="integer">10_000_000</span>.times { |i| a = <span class="string"><span class="delimiter">'</span><span class="content">hey now </span><span class="delimiter">'</span></span> + i.to_s } }
<span class="comment"># =&gt;   6.490000   0.020000   6.510000 (  6.502408)</span>
</pre></td>
</tr></table>
</div></div>
<p>This ends up being about the same execution time as string interpolation.
Before we answer the previous question let&#39;s take a look at one more option</p>
<div class="highlight ruby "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
</pre></td>
  <td class="code"><pre>require <span class="string"><span class="delimiter">'</span><span class="content">benchmark</span><span class="delimiter">'</span></span>

<span class="constant">Benchmark</span>.measure { <span class="integer">1</span>..<span class="integer">10_000_000</span>.times { |i| a = <span class="string"><span class="delimiter">'</span><span class="content">hey now </span><span class="delimiter">'</span></span> &lt;&lt; i } }
<span class="comment">#  =&gt;   2.990000   0.010000   3.000000 (  2.986346)</span>
</pre></td>
</tr></table>
</div></div>
<p>Whoa, this is much faster, more than 50% faster than interpolation and
concatenation. Why? What is happening here?</p>

<p>What we are seeing is the difference between creating a new object and
modifying an existing object. It is not immediately obvious with string
interpolation as it is with concatenation. With the append we are actually 
modyfing the object so there is no need to do any memory allocation.</p>

<p>There are several differences between the two styles, they aren&#39;t
always interchangable. Most of the time the decision comes down to a
styling preference but there are certain use cases where it can make a
difference. String interpolation is in Ruby as a nice convenience but if
you&#39;re doing anything that is relying upon interpolation quite heavily
you may want to consider other options.</p>
<div class='post__share'><div class='post__share__links'><a class='twitter-share-button' data-url='http://reefpoints.dockyard.com/ruby/2012/02/16/single-quotes-or-double-quotes.html' data-via='DockYard' href='https://twitter.com/share'>Tweet</a><script>
  !function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src='//platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document,'script','twitter-wjs');
</script><div class='g-plusone' data-href='#' data-size='medium' data-width='100'></div><script>
  (function() {var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;po.src = 'https://apis.google.com/js/plusone.js';var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);})();
</script></div><p>This article is brought to you by <a class='text-link' href='http://www.dockyard.com/'>DockYard</a>. If you see an issue, please send a <a href='https://github.com/dockyard/reefpoints/blob/master/source/posts/', class='text-link post__issue', target: '_blank'>pull request</a> to contribute.</p><a class='button--post' href='http://www.dockyard.com/hire-us'>Hire Us</a></div></current_page></div></div><div class='post__comments'><div id='disqus_thread'></div><script>
  var disqus_shortname = 'reefpoints';
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script><noscript>Please enable JavaScript to view the <a href='http://disqus.com/?ref_noscript'>comments powered by Disqus</a>.</noscript></noscript></div><script>
  var path = window.location.pathname.split('/').reverse();
  var postname = path[0].split('.');
  var change = postname[0] + '.md';
  var newpath = 'https://github.com/dockyard/reefpoints/blob/master/source/posts/' + path[3] + '-' + path[2] + '-' + path[1] + '-' + change
  $('.post__issue').attr('href', newpath);
  
  $('.search').submit(function(event) {
    event.preventDefault();
    window.location = $(this).data('url') + '#q=' + $('.search__input').val();
  });
</script>
<h2 class='nothin'>Your search returned no results. Perhaps you should try again.</h2></div><div class='push--big'></div><footer><div class='l-wrap'><div class='footer-group'><h3 class='footer-group__title'>EVENTS</h3><nav><a class='footer__event' href='http://wickedgoodruby.com/' target='_blank'><div class='footer__event--wgr'></div><h4 class='footer-title'>Wicked Good Ruby Conf</h4></a><a class='footer__event' href='http://www.meetup.com/Boston-Ember-js/' target='_blank'><div class='footer__event--ember'></div><h4 class='footer-title'>Boston Ember.js Meetup</h4></a><a class='footer__event' href='http://www.meetup.com/uxboston/' target='_blank'><div class='footer__event--ux'></div><h4 class='footer-title'>UX Boston Meetup</h4></a><a class='footer__event' href='http://openhack.github.io/boston/' target='_blank'><div class='footer__event--openhack'></div><h4 class='footer-title'>OpenHack Boston</h4></a></nav></div><div class='footer-group'><a href='/'><h3 class='footer-group__title'>BLOG</h3></a><nav class='blog-nav--footer'><a class='blog-nav-item--footer' href='/2013/11/15/think.html'><h4 class='footer-title'>Think</h4><p class='footer-desc'>Don't do what others tell you to do without thinking about it</p></a><a class='blog-nav-item--footer' href='/2013/11/11/capybara-extensions.html'><h4 class='footer-title'>Introducing Capybara-Extensions</h4><p class='footer-desc'>Write more descriptive tests with additional finders and matchers for Capybara.</p></a><a class='blog-nav-item--footer' href='/2013/11/05/design-patterns-command-pattern.html'><h4 class='footer-title'>Design Patterns: The Command Pattern</h4><p class='footer-desc'>Exploring design patterns and their use cases</p></a></nav></div><div class='footer-group'><a href='/hire-us'><h3 class='footer-group__title'>CONTACT</h3></a><p class='footer-desc'>DockYard HQ is located in Boston. Stop in sometime and meet our team!</p><a class='footer-address has-border--top' href='https://www.google.com/maps/preview#!q=DockYard%2C+Tremont+Street+%23200%2C+Boston%2C+MA&amp;data=!4m15!2m14!1m13!1s0x89e37083512ceab3%3A0x1e657c639844318d!3m8!1m3!1d197180!2d-70.970284!3d42.31435!3m2!1i400!2i802!4f13.1!4m2!3d42.357236!4d-71.061077' target='_blank'><p class='footer-desc'>DockYard Inc.</p><p class='footer-desc'>101 Tremont Street</p><p class='footer-desc'>Suite 200</p><p class='footer-desc'>Boston, MA 02108</p></a><a class="text-link" href="http://www.dockyard.com/hire-us">Get in touch.</a><div class='footer-social has-border--top'><a class='social-nav-item' data-icon='#' href='https://twitter.com/dockyard' target='_blank'><span class='is-hidden'>Twitter</span></a><a class='social-nav-item' data-icon='★' href='https://github.com/dockyard' target='_blank'><span class='is-hidden'>GitHub</span></a><a class='social-nav-item' data-icon='✒' href='http://reefpoints.dockyard.com/atom.xml' target='_blank'><span class='is-hidden'>RSS</span></a></div></div></div></footer><audio class='foghorn' preload='auto' src='/sound/foghorn.mp3'></audio><script>
  /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  var disqus_shortname = 'reefpoints'; // required: replace example with your forum shortname
  
  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function () {
      var s = document.createElement('script'); s.async = true;
      s.type = 'text/javascript';
      s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
      (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
  }());
</script></body></html>
